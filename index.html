<!DOCTYPE html>
<head>
  <title>If my country was like Syria</title>
  <meta name="viewport" content="width=600, initial-scale=0.6">
  <meta charset="UTF-8">
	<link rel="stylesheet" href="style/style.css">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.4.0/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<style>

</style>
<body>
  <div id = "header"><h1>WHAT IF YOUR COUNTRY FACED CRISIS AS BIG AS WAR IN SYRIA?</h1></div>
  <div id = "header-text"><p>See how it would affect you and your countrymen</p></div>
  <div class = introduction><hr><p>
If <select id="myCountry" onchange="countryChange()">
  <option value='USA'>USA</option>
  <option value='Afghanistan'>Afghanistan</option>
  <option value='Albania'>Albania</option>
  <option value='Algeria'>Algeria</option>
  <option value='American Samoa'>American Samoa</option>
  <option value='Andorra'>Andorra</option>
  <option value='Angola'>Angola</option>
  <option value='Anguilla'>Anguilla</option>
  <option value='Antigua and Barbuda'>Antigua and Barbuda</option>
  <option value='Argentina'>Argentina</option>
  <option value='Armenia'>Armenia</option>
  <option value='Aruba'>Aruba</option>
  <option value='Australia'>Australia</option>
  <option value='Austria'>Austria</option>
  <option value='Azerbaijan'>Azerbaijan</option>
  <option value='Bahamas'>Bahamas</option>
  <option value='Bahrain'>Bahrain</option>
  <option value='Bangladesh'>Bangladesh</option>
  <option value='Barbados'>Barbados</option>
  <option value='Belarus'>Belarus</option>
  <option value='Belgium'>Belgium</option>
  <option value='Belize'>Belize</option>
  <option value='Benin'>Benin</option>
  <option value='Bermuda'>Bermuda</option>
  <option value='Bhutan'>Bhutan</option>
  <option value='Bolivia'>Bolivia</option>
  <option value='Bosnia and Herzegovina'>Bosnia and Herzegovina</option>
  <option value='Botswana'>Botswana</option>
  <option value='Brazil'>Brazil</option>
  <option value='British Virgin Islands'>British Virgin Islands</option>
  <option value='Brunei Darussalam'>Brunei Darussalam</option>
  <option value='Bulgaria'>Bulgaria</option>
  <option value='Burkina Faso'>Burkina Faso</option>
  <option value='Burundi'>Burundi</option>
  <option value='Cabo Verde'>Cabo Verde</option>
  <option value='Cambodia'>Cambodia</option>
  <option value='Cameroon'>Cameroon</option>
  <option value='Canada'>Canada</option>
  <option value='Cayman Islands'>Cayman Islands</option>
  <option value='Central African Republic'>Central African Republic</option>
  <option value='Chad'>Chad</option>
  <option value='Channel Islands'>Channel Islands</option>
  <option value='Chile'>Chile</option>
  <option value='China'>China</option>
  "<option value='China, Hong Kong SAR'>China, Hong Kong SAR</option>"
  "<option value='China, Macao SAR'>China, Macao SAR</option>"
  <option value='Colombia'>Colombia</option>
  <option value='Comoros'>Comoros</option>
  <option value='Congo'>Congo</option>
  <option value='Cook Islands'>Cook Islands</option>
  <option value='Costa Rica'>Costa Rica</option>
  <option value='Cote d'Ivoire'>Cote d'Ivoire</option>
  <option value='Croatia'>Croatia</option>
  <option value='Cuba'>Cuba</option>
  <option value='Curacao'>Curacao</option>
  <option value='Cyprus'>Cyprus</option>
  <option value='Czech Republic'>Czech Republic</option>
  <option value='Congo'>Congo</option>
  <option value='Denmark'>Denmark</option>
  <option value='Djibouti'>Djibouti</option>
  <option value='Dominica'>Dominica</option>
  <option value='Dominican Republic'>Dominican Republic</option>
  <option value='DPR Korea'>DPR Korea</option>
  <option value='Ecuador'>Ecuador</option>
  <option value='Egypt'>Egypt</option>
  <option value='El Salvador'>El Salvador</option>
  <option value='Equatorial Guinea'>Equatorial Guinea</option>
  <option value='Eritrea'>Eritrea</option>
  <option value='Estonia'>Estonia</option>
  <option value='Ethiopia'>Ethiopia</option>
  <option value='Faeroe Islands'>Faeroe Islands</option>
  <option value='Falkland Islands'>Falkland Islands</option>
  <option value='Fiji'>Fiji</option>
  <option value='Finland'>Finland</option>
  <option value='France'>France</option>
  <option value='French Guiana'>French Guiana</option>
  <option value='French Polynesia'>French Polynesia</option>
  <option value='Gabon'>Gabon</option>
  <option value='Gambia'>Gambia</option>
  <option value='Georgia'>Georgia</option>
  <option value='Germany'>Germany</option>
  <option value='Ghana'>Ghana</option>
  <option value='Gibraltar'>Gibraltar</option>
  <option value='Greece'>Greece</option>
  <option value='Greenland'>Greenland</option>
  <option value='Grenada'>Grenada</option>
  <option value='Guadeloupe'>Guadeloupe</option>
  <option value='Guam'>Guam</option>
  <option value='Guatemala'>Guatemala</option>
  <option value='Guinea'>Guinea</option>
  <option value='Guinea-Bissau'>Guinea-Bissau</option>
  <option value='Guyana'>Guyana</option>
  <option value='Haiti'>Haiti</option>
  <option value='Holy See'>Holy See</option>
  <option value='Honduras'>Honduras</option>
  <option value='Hungary'>Hungary</option>
  <option value='Iceland'>Iceland</option>
  <option value='India'>India</option>
  <option value='Indonesia'>Indonesia</option>
  <option value='Iran'>Iran</option>
  <option value='Iraq'>Iraq</option>
  <option value='Ireland'>Ireland</option>
  <option value='Isle of Man'>Isle of Man</option>
  <option value='Israel'>Israel</option>
  <option value='Italy'>Italy</option>
  <option value='Jamaica'>Jamaica</option>
  <option value='Japan'>Japan</option>
  <option value='Jordan'>Jordan</option>
  <option value='Kazakhstan'>Kazakhstan</option>
  <option value='Kenya'>Kenya</option>
  <option value='Kiribati'>Kiribati</option>
  <option value='Kuwait'>Kuwait</option>
  <option value='Kyrgyzstan'>Kyrgyzstan</option>
  <option value='Lao PDR'>Lao PDR</option>
  <option value='Latvia'>Latvia</option>
  <option value='Lebanon'>Lebanon</option>
  <option value='Lesotho'>Lesotho</option>
  <option value='Liberia'>Liberia</option>
  <option value='Libya'>Libya</option>
  <option value='Liechtenstein'>Liechtenstein</option>
  <option value='Lithuania'>Lithuania</option>
  <option value='Luxembourg'>Luxembourg</option>
  <option value='Madagascar'>Madagascar</option>
  <option value='Malawi'>Malawi</option>
  <option value='Malaysia'>Malaysia</option>
  <option value='Maldives'>Maldives</option>
  <option value='Mali'>Mali</option>
  <option value='Malta'>Malta</option>
  <option value='Marshall Islands'>Marshall Islands</option>
  <option value='Martinique'>Martinique</option>
  <option value='Mauritania'>Mauritania</option>
  <option value='Mauritius'>Mauritius</option>
  <option value='Mayotte'>Mayotte</option>
  <option value='Mexico'>Mexico</option>
  <option value='Micronesia'>Micronesia</option>
  <option value='Monaco'>Monaco</option>
  <option value='Mongolia'>Mongolia</option>
  <option value='Montenegro'>Montenegro</option>
  <option value='Montserrat'>Montserrat</option>
  <option value='Morocco'>Morocco</option>
  <option value='Mozambique'>Mozambique</option>
  <option value='Myanmar'>Myanmar</option>
  <option value='Namibia'>Namibia</option>
  <option value='Nauru'>Nauru</option>
  <option value='Nepal'>Nepal</option>
  <option value='Netherlands'>Netherlands</option>
  <option value='New Caledonia'>New Caledonia</option>
  <option value='New Zealand'>New Zealand</option>
  <option value='Nicaragua'>Nicaragua</option>
  <option value='Niger'>Niger</option>
  <option value='Nigeria'>Nigeria</option>
  <option value='Niue'>Niue</option>
  <option value='Norway'>Norway</option>
  <option value='Oman'>Oman</option>
  <option value='Pakistan'>Pakistan</option>
  <option value='Palau'>Palau</option>
  <option value='Panama'>Panama</option>
  <option value='Papua New Guinea'>Papua New Guinea</option>
  <option value='Paraguay'>Paraguay</option>
  <option value='Peru'>Peru</option>
  <option value='Philippines'>Philippines</option>
  <option value='Poland'>Poland</option>
  <option value='Portugal'>Portugal</option>
  <option value='Puerto Rico'>Puerto Rico</option>
  <option value='Qatar'>Qatar</option>
  <option value='Republic of Korea'>Republic of Korea</option>
  <option value='Republic of Moldova'>Republic of Moldova</option>
  <option value='Réunion'>Réunion</option>
  <option value='Romania'>Romania</option>
  <option value='Russian Federation'>Russian Federation</option>
  <option value='Rwanda'>Rwanda</option>
  <option value='Saint Helena'>Saint Helena</option>
  <option value='Saint Kitts and Nevis'>Saint Kitts and Nevis</option>
  <option value='Saint Lucia'>Saint Lucia</option>
  <option value='Samoa'>Samoa</option>
  <option value='San Marino'>San Marino</option>
  <option value='Sao Tome and Principe'>Sao Tome and Principe</option>
  <option value='Saudi Arabia'>Saudi Arabia</option>
  <option value='Senegal'>Senegal</option>
  <option value='Serbia'>Serbia</option>
  <option value='Seychelles'>Seychelles</option>
  <option value='Sierra Leone'>Sierra Leone</option>
  <option value='Singapore'>Singapore</option>
  <option value='Slovakia'>Slovakia</option>
  <option value='Slovenia'>Slovenia</option>
  <option value='Solomon Islands'>Solomon Islands</option>
  <option value='Somalia'>Somalia</option>
  <option value='South Africa'>South Africa</option>
  <option value='South Sudan'>South Sudan</option>
  <option value='Spain'>Spain</option>
  <option value='Sri Lanka'>Sri Lanka</option>
  <option value='Palestine'>Palestine</option>
  <option value='Sudan'>Sudan</option>
  <option value='Suriname'>Suriname</option>
  <option value='Swaziland'>Swaziland</option>
  <option value='Sweden'>Sweden</option>
  <option value='Switzerland'>Switzerland</option>
  <option value='Tajikistan'>Tajikistan</option>
  <option value='Thailand'>Thailand</option>
  <option value='Timor-Leste'>Timor-Leste</option>
  <option value='Togo'>Togo</option>
  <option value='Tokelau'>Tokelau</option>
  <option value='Tonga'>Tonga</option>
  <option value='Trinidad and Tobago'>Trinidad and Tobago</option>
  <option value='Tunisia'>Tunisia</option>
  <option value='Turkey'>Turkey</option>
  <option value='Turkmenistan'>Turkmenistan</option>
  <option value='Tuvalu'>Tuvalu</option>
  <option value='Uganda'>Uganda</option>
  <option value='Ukraine'>Ukraine</option>
  <option value='United Arab Emirates'>United Arab Emirates</option>
  <option value='UK and NIR'>UK and NIR</option>
  <option value='Tanzania'>Tanzania</option>
  <option value='Virgin Islands'>Virgin Islands</option>
  <option value='Uruguay'>Uruguay</option>
  <option value='Uzbekistan'>Uzbekistan</option>
  <option value='Vanuatu'>Vanuatu</option>
  <option value='Venezuela'>Venezuela</option>
  <option value='Viet Nam'>Viet Nam</option>
  <option value='Western Sahara'>Western Sahara</option>
  <option value='Yemen'>Yemen</option>
  <option value='Zambia'>Zambia</option>
  <option value='Zimbabwe'>Zimbabwe</option>
</select>
   was in situation like <strong>Syria </strong></p><p><button class = "enter" onclick="run()">Enter scenario ↓</button></p><hr></div>

<script>
$("#myCountry").val('USA');

var mycountry = "USA";
var vscountry = "Syrian Arab Republic";
var blocksEnter;
var blocksUpdate;

var myCountryText;

function countryChange() {

  mycountry = (document.getElementById("myCountry").value);

}

//Population calculations
function roundToTwo(num) {
    return +(Math.round(num + "e+2")  + "e-2");
}


// set the dimensions and margins of the graph
var margin = {top: 20, right: 30, bottom: 30, left: 30},
    width = 600 - margin.left - margin.right,
    height = 240 - margin.top - margin.bottom;

    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")");


function run() {

  d3.selectAll(".next")
    .text("Next")

  svg.selectAll("text")
    .remove();

  svg.selectAll("rect")
    .remove();




  d3.select(".button").attr("stage", "0")
    .style("opacity", 1);

  d3.csv("data/refugeedata.csv", function(error, data) {
    if (error) throw error;

    data.forEach(function(d) {
      d.totpop = +d.totpop,
      d.milpop = d.totpop / 1000000,
      d.multiplier = 0.24,
      d.percent = 24,
      d.reduced = d.multiplier * d.milpop,
      d["Ref-orig-tot"] = +d["Ref-orig-tot"]*1000,
      d.refpct = d["Ref-orig-tot"]/d.totpop
    })

    //Chosen country
    countryData = data.filter(function(d) {
      return d.Region == mycountry;
    })

    //Syria data
    syriaData =   data.filter(function(d) {
        return d.Region == vscountry;
      })

    //Decide divider

    var divider = countryData[0]["totpop"] / 500;


    var dividerPretty = Math.round(divider / 1000) * 1000;

    if (dividerPretty == 0) {
      dividerPretty = Math.round(divider);
    }

    var array = []

    var syrianKidPct = 0.47;
    var prewarPop = 24.5;

    var popblocks = countryData[0]["totpop"] / divider;
    var leaveCountry = popblocks * syriaData[0]["refpct"]
    var leaveCountryKids = leaveCountry * syrianKidPct

    for (sq = 0; sq < popblocks; sq++) {

        if(sq < leaveCountry && sq < leaveCountryKids) {
          array.push({key: sq, id: "refugee", kid: "yes"})
        } else if (sq < leaveCountry && sq > leaveCountryKids) {
          array.push({key: sq, id: "refugee", kid: "no"})
        } else {
          array.push({key: sq, id: "stay", kid: "no"})
        }
      }


    svg.selectAll("myCountryText")
      .data(countryData).enter()
      .append("text")
      .transition()
      .delay(100)
      .attr("x", 1)
      .attr("y", height/2-10)
      .style("font-family","Space Mono")
      .attr("fill", "white")
      .attr("font-size", "16px")
      .text(function(d) { return "There are " +  roundToTwo(d.milpop).toLocaleString() + " million people in " + mycountry; })

    svg.selectAll("myCountryText")
      .data(syriaData).enter()
      .append("text")
      .transition()
      .delay(1500)
      .attr("x", 1)
      .attr("y", height/2 + 10)
      .style("font-family","Space Mono")
      .attr("fill", "white")
      .attr("font-size", "16px")
      .text(function(d) { return "There are " +  roundToTwo(d.milpop).toLocaleString() + " million people in " + "Syria"; })

      svg.selectAll("myCountryText")
        .data(syriaData).enter()
        .append("text")
        .transition()
        .delay(4500)
        .attr("x", 1)
        .attr("y", height - 20)
        .style("font-family","Space Mono")
        .attr("fill", "white")
        .attr("font-size", "16px")
        .text("Please, click 'Next'")





      d3.selectAll(".button")
        .on("click", function() {
          if(d3.select(this).attr("stage") == "0") {
            click1();
            d3.select(this).attr("stage", "1")
          } else if (d3.select(this).attr("stage") == "1") {
            click2();
            d3.select(this).attr("stage", "2")
          } else if (d3.select(this).attr("stage") == "2") {
            click3();
            d3.select(this).attr("stage", "3")
          } else if (d3.select(this).attr("stage") == "3") {
            click4();
            d3.select(this).attr("stage", "4")
          } else if (d3.select(this).attr("stage") == "4") {
            click5();
            d3.select(this).attr("stage", "5")
          } else if (d3.select(this).attr("stage") == "5") {
            click6();
            d3.select(this).attr("stage", "6")
          } else if (d3.select(this).attr("stage") == "6") {
            click7();
            d3.select(this).attr("stage", "7")
          } else if (d3.select(this).attr("stage") == "7") {
          d3.select(this).attr("stage", "0")
          run();
}})


      function click1() {

        svg.selectAll("text")
        .remove();

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(500)
          .attr("x", 1)
          .attr("y", height/2 - 50)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "15.9px")
          .text(function() { return "Prewar population in Syria was " + prewarPop.toLocaleString() + " million people"; });

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(2550)
          .attr("x", 1)
          .attr("y", height/2 - 30)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "15.9px")
          .text(function(d) { return "Population in Syria has decreased by " + d.percent + " percent"; });

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(5500)
          .attr("x", 1)
          .attr("y", height/2)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "15.9px")
          .text(function(d) { return "If " + mycountry + " faced the same fate as Syria..."; });

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(8000)
          .attr("x", 1)
          .attr("y", height/2 + 20)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "15.9px")
          .text(function(d) { return "there would be " + roundToTwo(d.reduced).toLocaleString() + " million people less than prewar"; });

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(10500)
          .attr("x", 1)
          .attr("y", height - 10)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "15.9px")
          .text("Please, click 'Next'");


        }

      function click2() {

          svg.selectAll("text")
          .remove();

          svg.selectAll("myCountryText")
            .data(countryData).enter()
            .append("text")
            .transition()
            .delay(500)
            .attr("x", 1)
            .attr("y", height/2 - 10)
            .style("font-family","Space Mono")
            .attr("fill", "white")
            .attr("font-size", "16px")
            .text(function() { return "You will see 500 blocks representing"; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", 1)
              .attr("y", height/2 + 10)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return "population of " + mycountry; })

              svg.selectAll("myCountryText")
                .data(countryData).enter()
                .append("rect")
                .transition()
                .delay(2500)
                .attr("x", 36)
                .attr("y", height/2 + 30)
                .attr("height", 10)
                .attr("width", 10)
                .attr("fill", "gray")

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(2500)
              .attr("x", 1)
              .attr("y", height/2 + 40)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("xml:space", "preserve")
              .attr("font-size", "16px")
              .text(function() { return "One " + " " + "= " + dividerPretty.toLocaleString() + " persons"; })

              svg.selectAll("myCountryText")
                .data(syriaData).enter()
                .append("text")
                .transition()
                .delay(4500)
                .attr("x", 1)
                .attr("y", height - 20)
                .style("font-family","Space Mono")
                .attr("fill", "white")
                .attr("font-size", "16px")
                .text("Please, click 'Next'")


        }

      //Append rects
      function click3() {

          svg.selectAll("text")
          .remove();

          svg.selectAll("rect")
          .remove();

          svg.selectAll("myCountryText")
            .data(countryData).enter()
            .append("text")
            .transition()
            .delay(500)
            .attr("x", width-160)
            .attr("y", 10)
            .style("font-family","Space Mono")
            .attr("fill", "white")
            .attr("font-size", "16px")
            .text(function() { return "This is the"; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", width-160)
              .attr("y", 30)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return "population of"; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", width-160)
              .attr("y", 50)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return mycountry; })

              svg.selectAll("myCountryText")
                .data(countryData).enter()
                .append("text")
                .transition()
                .delay(3000)
                .attr("x", width-160)
                .attr("y", 100)
                .style("font-family","Space Mono")
                .attr("fill", "white")
                .attr("font-size", "16px")
                .text(function() { return "What if"; })

                svg.selectAll("myCountryText")
                  .data(countryData).enter()
                  .append("text")
                  .transition()
                  .delay(3000)
                  .attr("x", width-160)
                  .attr("y", 120)
                  .style("font-family","Space Mono")
                  .attr("fill", "white")
                  .attr("font-size", "16px")
                  .text(function() { return mycountry; })

                svg.selectAll("myCountryText")
                  .data(countryData).enter()
                  .append("text")
                  .transition()
                  .delay(3000)
                  .attr("x", width-160)
                  .attr("y", 140)
                  .style("font-family","Space Mono")
                  .attr("fill", "white")
                  .attr("font-size", "16px")
                  .text(function() { return "had as many"; })

                svg.selectAll("myCountryText")
                  .data(countryData).enter()
                  .append("text")
                  .transition()
                  .delay(3000)
                  .attr("x", width-160)
                  .attr("y", 160)
                  .style("font-family","Space Mono")
                  .attr("fill", "white")
                  .attr("font-size", "16px")
                  .text(function() { return "refugees"; })

                  svg.selectAll("myCountryText")
                    .data(countryData).enter()
                    .append("text")
                    .transition()
                    .delay(3000)
                    .attr("x", width-160)
                    .attr("y", 180)
                    .style("font-family","Space Mono")
                    .attr("fill", "white")
                    .attr("font-size", "16px")
                    .text(function() { return "as Syria"; })


          blocksUpdate = svg.selectAll("blocks")
              .data(array)

          blocksEnter = blocksUpdate
            .enter()
            .append("rect")
            .transition()
            .delay(function(d,i) { return i*5; })
            .attr("class", function(d) { return d.id + "blocks"})
            .attr("x", function(d) { return (d.key % 30) * 12; })
            .attr("y", function(d) { return Math.floor(d.key/30) * 12; })
            .attr("width", 10)
            .attr("height", 10)
            .attr("fill", "gray");

          }

      //Fill refugees
      function click4() {
        svg.selectAll("text")
        .remove();

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(500)
          .attr("x", width-160)
          .attr("y", 10)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "16px")
          .text(function() { return "This would be"; })

          svg.selectAll("myCountryText")
            .data(countryData).enter()
            .append("text")
            .transition()
            .delay(500)
            .attr("x", width-160)
            .attr("y", 30)
            .style("font-family","Space Mono")
            .attr("fill", "white")
            .attr("font-size", "16px")
            .text(function() { return "proportion of "; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", width-160)
              .attr("y", 50)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return "refugees in "; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", width-160)
              .attr("y", 70)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return mycountry; })

              svg.selectAll("myCountryText")
                .data(countryData).enter()
                .append("text")
                .transition()
                .delay(2500)
                .attr("x", width-160)
                .attr("y", 120)
                .style("font-family","Space Mono")
                .attr("fill", "white")
                .attr("font-size", "16px")
                .text(function() { return "It sums up to"; })

                svg.selectAll("myCountryText")
                  .data(countryData).enter()
                  .append("text")
                  .transition()
                  .delay(2500)
                  .attr("x", width-160)
                  .attr("y", 140)
                  .style("font-family","Space Mono")
                  .attr("fill", "white")
                  .attr("font-size", "16px")
                  .text(function() { return roundToTwo((leaveCountry*divider) / 1000000).toLocaleString() + " million"; })

                svg.selectAll("myCountryText")
                  .data(countryData).enter()
                  .append("text")
                  .transition()
                  .delay(2500)
                  .attr("x", width-160)
                  .attr("y", 160)
                  .style("font-family","Space Mono")
                  .attr("fill", "white")
                  .attr("font-size", "16px")
                  .text(function() { return "people"; })


          svg.selectAll(".refugeeblocks")
            .transition()
            .delay(function(d,i) { return i*10})
            .attr("fill", "red")
            .style("opacity", 0.5)
            .attr("class", function(d) { return d.id + d.kid + "blocks"; })


      }

      function click5() {

        svg.selectAll("text")

        .remove();

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(500)
          .attr("x", width-160)
          .attr("y", 10)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "16px")
          .text(function() { return "Can you guess"; })

          svg.selectAll("myCountryText")
            .data(countryData).enter()
            .append("text")
            .transition()
            .delay(500)
            .attr("x", width-160)
            .attr("y", 30)
            .style("font-family","Space Mono")
            .attr("fill", "white")
            .attr("font-size", "16px")
            .text(function() { return "how many of them"; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", width-160)
              .attr("y", 50)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return "would be"; })

              svg.selectAll("myCountryText")
                .data(countryData).enter()
                .append("text")
                .transition()
                .delay(500)
                .attr("x", width-160)
                .attr("y", 70)
                .style("font-family","Space Mono")
                .attr("fill", "white")
                .attr("font-size", "16px")
                .text(function() { return "under 18?"; })

      }

      function click6() {

        svg.selectAll("text")
        .remove();

          svg.selectAll("myCountryText")
            .data(countryData).enter()
            .append("text")
            .transition()
            .delay(500)
            .attr("x", width-160)
            .attr("y", 10)
            .style("font-family","Space Mono")
            .attr("fill", "white")
            .attr("font-size", "16px")
            .text(function() { return "It's total of"; })

            svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(500)
              .attr("x", width-160)
              .attr("y", 30)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return roundToTwo((leaveCountry*divider*syrianKidPct) / 1000000).toLocaleString() + " million"; })

              svg.selectAll("myCountryText")
                .data(countryData).enter()
                .append("text")
                .transition()
                .delay(500)
                .attr("x", width-160)
                .attr("y", 50)
                .style("font-family","Space Mono")
                .attr("fill", "white")
                .attr("font-size", "16px")
                .text(function() { return "children and teens"; })

          svg.selectAll(".refugeeyesblocks")
            .transition()
            .delay(function(d,i) { return i*10})
            .style("opacity", 1)
      }

      function click7() {

        svg.selectAll("text")
        .transition()
        .delay(100)
        .remove();

        svg.selectAll("rect")
        .transition()
        .delay(100)
        .remove();

        svg.selectAll("myCountryText")
          .data(countryData).enter()
          .append("text")
          .transition()
          .delay(1500)
          .attr("x", 1)
          .attr("y", height/2 - 10)
          .style("font-family","Space Mono")
          .attr("fill", "white")
          .attr("font-size", "16px")
          .text(function() { return "No matter how far you are from Syria"; })

          svg.selectAll("myCountryText")
            .data(countryData).enter()
            .append("text")
            .transition()
            .delay(4500)
            .attr("x", 1)
            .attr("y", height/2 + 10)
            .style("font-family","Space Mono")
            .attr("fill", "white")
            .attr("font-size", "16px")
            .text(function() { return "we all should care"; })

          svg.selectAll("myCountryText")
              .data(countryData).enter()
              .append("text")
              .transition()
              .delay(7500)
              .attr("x", 1)
              .attr("y", height - 20)
              .style("font-family","Space Mono")
              .attr("fill", "white")
              .attr("font-size", "16px")
              .text(function() { return "Give your Support"; })

          d3.selectAll(".next")
            .text("Start again")
            .style("opacity", 0)

          d3.selectAll(".button")
            .style("background-color", "black")

          d3.selectAll(".next")
            .transition()
            .delay(7500)
            .duration(1000)
            .style("opacity", 1)

          d3.selectAll(".button")
            .transition()
            .delay(7500)
            .duration(1000)
            .style("background-color", "white")

            d3.selectAll(".footer")
              .transition()
              .delay(8500)
              .duration(1000)
              .style("opacity", 1)





      }






});

}

</script>
<div id="bottombar">
<div class = "button" stage = "0"><text class = "next">Next</text></div>
</div>
<div class="footer">
<hr>
<p><strong>©Joel Kanerva 2017 <a href="https://www.infograafikko.fi">infograafikko.fi</a>, Data source: <a href="https://docs.google.com/spreadsheets/d/1jdAtYxYa_EE_DTWEAJxIHCehpCSUEy5EVIU_uGvKk1E/edit#gid=234272824">Unicef Data</a></strong></p>
</div>
</body>
